import pyvista as pv
import numpy as np

mnodes = [[-58.5,	-26.5		,0],
	 [-58.5,	-26.5		,0],
	 [58.5,		-26.5		,0],
	 [58.5,		-26.5		,0],
	 [-58.5,	26.5		,0],
	 [-58.5,	26.5		,0],
	 [58.5,		26.5		,0],
	 [58.5,		26.5		,0],

	 [-276.405,	-226.173	,-22],
	 [-258.173,	-244.405	,-22],
	 [276.405,	-226.173	,-22],
	 [258.173,	-244.405	,-22],
	 [-276.6,	226.352		,-22],
	 [-258.352,	244.6		,-22],
	 [276.6,	226.352		,-22],
	 [258.352,	244.6		,-22]]

nodes = [[-58.5, 26.5,   0.0],
	   [-28.5, 26.5,   0.0],
	   [0,     26.5,   0.0],
	   [28.5,  26.5,   0.0],
	   [58.5,  26.5,   0.0],
	   [-58.5,  0.0,   0.0],
	   [-28.5,  0.0,   0.0],
	   [0,      0.0,   0.0],
	   [28.5,   0.0,   0.0],
	   [58.5,   0.0,   0.0],
	   [-58.5, -26.5,  0.0],
	   [-28.5, -26.5,  0.0],
	   [0,     -26.5,  0.0],
	   [28.5,  -26.5,  0.0],
	   [58.5,  -26.5,  0.0],

	   [-58.5, 26.5,   -10.0],
	   [-28.5, 26.5,   -10.0],
	   [0,     26.5,   -10.0],
	   [28.5,  26.5,   -10.0],
	   [58.5,  26.5,   -10.0],
	   [-58.5,  0.0,   -10.0],
	   [-28.5,  0.0,   -10.0],
	   [0,      0.0,   -10.0],
	   [28.5,   0.0,   -10.0],
	   [58.5,   0.0,   -10.0],
	   [-58.5, -26.5,  -10.0],
	   [-28.5, -26.5,  -10.0],
	   [0,     -26.5,  -10.0],
	   [28.5,  -26.5,  -10.0], 
	   [58.5,  -26.5,  -10.0],
	   [0,0,13.75]]
nodes+=mnodes

l1 = [[0,6],[1,6],[2,6],[10,6],[11,6],[12,6],
	[2,8],[3,8],[4,8],[12,8],[13,8],[14,8],
	[2,7],[7,12],
	[15,21],[16,21],[17,21],[25,21],[26,21],[27,21],
	[17,23],[18,23],[19,23],[27,23],[28,23],[29,23],
	[17,22],[22,27]]
l2 = [[0,1],[1,2],[2,3],[3,4],
	[5,6],[6,7],[7,8],[8,9],
	[10,11],[11,12],[12,13],[13,14],
	[0,5],[5,10],[4,9],[9,14]]
l3 = (np.array(l2) + 15).tolist()
# add vertical 2m pipe
for i in range(15):
	l2.append([i,i + 15])

l1+=[[15,1],[17,1],[17,3],[19,3],
	 [25,11],[27,11],[27,13],[29,13]]
l5 = [7,30]
lm=[]
for i in range(1,9):
	lm.append([30+i,30+i+8])


lines_all = l1 + l2 + l3 + [l5]+lm
edges = [[[2] + item] for item in lines_all]
mesh = pv.PolyData(nodes,lines=edges)
mesh.plot(scalars=np.arange(92),
    cpos=[-1, 1, 0.5],
    show_scalar_bar=True,
    show_edges=True,
    line_width=5,)

mesh.save("ningde.vtk")


p = pv.Plotter()
for item in nodes:
    p.add_mesh(pv.Sphere(radius=3 / 2,center=item))

for item in l1:
    p.add_lines(np.array(nodes)[item],width=0.5,color='g')
for item in l2:
    p.add_lines(np.array(nodes)[item],width=1,color='r')
for item in l3:
    p.add_lines(np.array(nodes)[item],width=1.5,color='b')
p.add_lines(np.array(nodes)[l5],width=2.5,color='k')

p.add_axes_at_origin()

# Render all of them
p.show()


